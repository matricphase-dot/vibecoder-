let todos = JSON.parse(localStorage.getItem('todos')) || []; const todoInput = document.getElementById('todo-input'); const addBtn = document.getElementById('add-btn'); const todoContainer = document.getElementById('todo-container'); function addTodo() { const todoText = todoInput.value.trim(); if (todoText) { const todo = { text: todoText, id: crypto.randomUUID() }; todos.push(todo); try { localStorage.setItem('todos', JSON.stringify(todos)); } catch (error) { console.error('Error saving to local storage:', error); } displayTodos(); todoInput.value = ''; } } function displayTodos() { todoContainer.innerHTML = ''; todos.forEach((todo) => { const todoHTML = `<div class="todo" role="listitem"><span>${todo.text}</span><button class="delete-btn" aria-label="Delete Todo Button">Delete</button><button class="edit-btn" aria-label="Edit Todo Button">Edit</button></div>`; todoContainer.insertAdjacentHTML('beforeend', todoHTML); }); } function deleteTodo(todoElement) { const todoId = todos.find((todo) => todo.text === todoElement.querySelector('span').textContent).id; todos = todos.filter((todo) => todo.id !== todoId); try { localStorage.setItem('todos', JSON.stringify(todos)); } catch (error) { console.error('Error saving to local storage:', error); } displayTodos(); } function editTodo(todoElement) { const todoId = todos.find((todo) => todo.text === todoElement.querySelector('span').textContent).id; const newTodoText = prompt('Enter new todo text:', todoElement.querySelector('span').textContent); if (newTodoText) { const updatedTodo = { text: newTodoText, id: todoId }; todos = todos.map((todo) => todo.id === todoId ? updatedTodo : todo); try { localStorage.setItem('todos', JSON.stringify(todos)); } catch (error) { console.error('Error saving to local storage:', error); } displayTodos(); } } addBtn.addEventListener('click', addTodo); todoContainer.addEventListener('click', (e) => { if (e.target.classList.contains('delete-btn')) { deleteTodo(e.target.parentNode); } else if (e.target.classList.contains('edit-btn')) { editTodo(e.target.parentNode); } }); displayTodos();